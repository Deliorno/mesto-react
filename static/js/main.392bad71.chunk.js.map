{"version":3,"sources":["images/logo.svg","components/Header.js","components/Footer.js","images/trash.svg","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","utils/api.js","components/ImagePopup.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ConfirmPopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","alt","src","logo","Footer","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","onClick","onCardDelete","bin","link","onCardClick","name","type","onCardLike","length","Main","onEditAvatar","style","backgroundImage","avatar","id","onEditProfile","about","onAddPlace","cards","map","api","_urlCards","_urlUserInfo","_headers","fetch","this","method","headers","then","res","ok","json","Promise","reject","status","catch","err","console","log","data","body","JSON","stringify","place","cardId","Component","ImagePopup","onClose","PopupWithForm","isOpen","onSubmit","title","children","disabled","isValid","EditProfilePopup","useState","setName","description","setDescription","errorMessage","nameErrorMessage","setNameErrorMessage","jobErrorMessage","setJobErrorMessage","setIsValid","nameRef","useRef","aboutRef","useEffect","current","value","e","preventDefault","onUpdateUser","ref","minLength","maxLength","required","defaultValue","onChange","target","validationMessage","checkValidity","placeholder","EditAvatarPopup","avatarErrorMessage","setAvatarErrorMessage","onUpdateAvatar","AddPlacePopup","placeErrorMessage","setPlaceErrorMessage","linkErrorMessage","setLinkErrorMessage","handleAddCard","onAddPlaceSubmit","ConformPopup","App","setCurrentUser","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isConfirmPopupOpen","setConfirmPopupOpen","selectedCard","setSelectedCard","cardToDelete","setCardToDelete","setCards","closeAllPopups","getData","cardsData","getUserInfo","userInfo","Provider","charSet","content","rel","href","onKeyDown","key","String","classList","addAvatar","resp","setUserInfo","addNewCard","ConfirmPopup","deleteCard","cardsRefreshed","newCards","filter","cardR","changeLikeCardStatus","newCard","c","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.392bad71.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.bbe2a6ea.svg\";","import logo from '../images/logo.svg';\r\nfunction Header(){\r\n    return(\r\n        <header className=\"header\">\r\n            <img alt=\"Лого\" src={logo} className=\"header__logo\"/>\r\n        </header>\r\n    )\r\n}\r\nexport default Header;","function Footer(){\r\n    return(\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__creator\">© 2021 Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\nexport default Footer;","export default __webpack_public_path__ + \"static/media/trash.2af49b82.svg\";","import React from \"react\";\r\nexport const CurrentUserContext = React.createContext();\r\n","import bin from \"../images/trash.svg\";\r\nimport React from \"react\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Card(props){\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    const isOwn = props.card.owner._id === currentUser._id;\r\n  \r\n    const cardDeleteButtonClassName = (\r\n        `gallery__trash-bin ${isOwn ? 'gallery__trash-bin_visible' : 'gallery__trash-bin_hidden'}`\r\n      ); \r\n    // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\r\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n    // Создаём переменную, которую после зададим в `className` для кнопки лайка\r\n    const cardLikeButtonClassName = (\r\n        `gallery__item-like ${isLiked ? 'gallery__item-like_active' : ''}`\r\n      ); \r\n\r\n     function handleClick() {\r\n         props.onCardClick(props.card);\r\n       } \r\n\r\n     function handleLikeClick(){\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    function handleDeleteClick(){\r\n        props.onCardDelete(props.card);\r\n    }\r\n    return(\r\n        <div className=\"gallery__item\">\r\n            <img className={cardDeleteButtonClassName} onClick={handleDeleteClick} src={bin} alt=\"Удалить\"/>\r\n            <img alt=\"Картинка\" src={props.card.link } onClick={handleClick} className=\"gallery__item-pic\"/>\r\n                <div className=\"gallery__info\">\r\n                    <h2 className=\"gallery__item-title\">{props.card.name}</h2>\r\n                    <div className=\"gallery__likes\" >\r\n                        <button type=\"button\" onClick={handleLikeClick} className={cardLikeButtonClassName}/>\r\n                        <p className=\"gallery__item-like-amount\">{props.card.likes.length}</p>\r\n                    </div>\r\n                </div>\r\n        </div>\r\n    )\r\n}\r\nexport default Card;","import React from \"react\";\r\nimport Card from \"./Card.js\";\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nfunction Main(props){\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    return(\r\n        <main className=\"content\">\r\n            <section className=\"profile\">\r\n                <div className=\"profile__info\">\r\n                    <div className=\"profile__avatar-overlay\" onClick={props.onEditAvatar}/> \r\n                    <div style={{ backgroundImage: `url(${currentUser.avatar})` }}  className=\"profile__avatar\"/>\r\n                    <div className=\"profile__text-info\">\r\n                        <div className=\"profile__row\">\r\n                            <h1 className=\"profile__name\" id=\"profile__name\">{currentUser.name}</h1>\r\n                            <button type=\"button\" className=\"profile__settings\" onClick={props.onEditProfile} id=\"settings\"/>\r\n                        </div>\r\n                        <p className=\"profile__status\" id=\"profile__status\">{currentUser.about}</p>\r\n                    </div> \r\n                </div>\r\n                <button type=\"button\" id=\"add_btn\" className=\"profile__add-btn\" onClick={props.onAddPlace }/>\r\n            </section>\r\n            <section className=\"gallery\">\r\n                {props.cards.map((card)=>{\r\n                    return(\r\n                        <Card onCardDelete={props.onCardDelete} onCardLike={props.onCardLike} card={card} key={card._id} onCardClick={props.onCardClick}/>\r\n                        )\r\n                })}\r\n            </section>\r\n    </main>\r\n    )\r\n}\r\nexport default Main;\r\n","import React from \"react\";\r\n class Api extends React.Component{\r\n    constructor(props) {\r\n      super(props);\r\n        this._urlCards = \"https://mesto.nomoreparties.co/v1/cohort-20/cards/\";\r\n        this._urlUserInfo = \"https://mesto.nomoreparties.co/v1/cohort-20/users/me/\";\r\n        this._headers = {\r\n            'content-type': 'application/json',\r\n            'authorization':'cc284eaa-be85-4547-943e-099c0aa22925'\r\n          };\r\n    }\r\n\r\n    getData(){\r\n       return fetch(this._urlCards, {\r\n            method: 'GET',\r\n            headers: this._headers\r\n        })\r\n        .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n        .catch((err)=>{\r\n            console.log(err)})\r\n    }\r\n\r\n    getUserInfo(){\r\n        return fetch(this._urlUserInfo, {\r\n             method: 'GET',\r\n             headers: this._headers\r\n         })\r\n         .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     setUserInfo(data){\r\n        return fetch(this._urlUserInfo, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: data.name,\r\n              about: data.about\r\n            })\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     addNewCard(data){\r\n        return fetch(this._urlCards, {\r\n            method: 'POST',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              name: data.place,\r\n              link: data.link\r\n            })\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     changeLikeCardStatus(cardId, isLiked){\r\n         if(isLiked){\r\n            return fetch(`${this._urlCards}likes/${cardId}`, {\r\n                method: 'PUT',\r\n                headers: this._headers\r\n              }) \r\n              .then((res) => {\r\n                if (res.ok){\r\n                    console.log(res)\r\n                    return res.json();  \r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n             .catch((err)=>{\r\n                 console.log(err)})\r\n         } else {\r\n            return fetch(`${this._urlCards}likes/${cardId}`, {\r\n                method: 'DELETE',\r\n                headers: this._headers\r\n              }) \r\n              .then((res) => {\r\n                if (res.ok){\r\n                    console.log(res)\r\n                    return res.json();\r\n                }\r\n                return Promise.reject(`Ошибка: ${res.status}`);\r\n            })\r\n             .catch((err)=>{\r\n                 console.log(err)})\r\n         }\r\n     }\r\n\r\n     deleteCard(cardId){\r\n        return fetch(`${this._urlCards}${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                console.log(res)\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     putLike(cardId){\r\n        return fetch(`${this._urlCards}likes/${cardId}`, {\r\n            method: 'PUT',\r\n            headers: this._headers\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                console.log(res)\r\n                return res.json();  \r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     deleteLike(cardId){\r\n        return fetch(`${this._urlCards}likes/${cardId}`, {\r\n            method: 'DELETE',\r\n            headers: this._headers\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n\r\n     addAvatar(link){\r\n        return fetch(`${this._urlUserInfo}avatar`, {\r\n            method: 'PATCH',\r\n            headers: this._headers,\r\n            body: JSON.stringify({\r\n              avatar: link,\r\n            })\r\n          }) \r\n          .then((res) => {\r\n            if (res.ok){\r\n                return res.json();\r\n            }\r\n            return Promise.reject(`Ошибка: ${res.status}`);\r\n        })\r\n         .catch((err)=>{\r\n             console.log(err)})\r\n     }\r\n}\r\nconst api = new Api();\r\nexport default api;","function ImagePopup(props){\r\n    return(\r\n        <div className={props.card ? 'popup popup_display_flex' : 'popup'} id=\"popup_image\">\r\n            <div className=\"popup__container\">\r\n                <button type=\"button\" className=\"popup__close-cross\" onClick={props.onClose}/>\r\n                <img className = 'popup__image' src={props.card.link} alt='картинка'/> \r\n                <p className=\"popup__subtitle\">{props.card.name}</p>\r\n            </div>\r\n        </div>)\r\n    }\r\nexport default ImagePopup;","function PopupWithForm(props){\r\n    // function validation(props){\r\n    //     //const from = document.queryCommandEnabled({props.name})\r\n    //     //console.log('Что-то произошло')\r\n    //    // form.checkValidity();\r\n    // }\r\n    return(\r\n        <>\r\n            <div className={props.isOpen ? 'popup popup_display_flex' : 'popup'}>\r\n                <div className=\"popup__container\">\r\n                    <button type=\"button\" className=\"popup__close-cross\" onClick={props.onClose}/>\r\n                    <form id={props.name} name={props.name} onSubmit={props.onSubmit} className=\"popup__card\">\r\n                        <h2 className=\"popup__header\">{props.title}</h2>\r\n                        {props.children}\r\n                        <button disabled={props.isValid ? '' : 'disabled'} className={props.isValid ? 'popup__btn' : 'popup__btn popup__btn_disabled'} type=\"submit\">Сохранить</button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\nexport default PopupWithForm;","import {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\n\r\nfunction EditProfilePopup(props){\r\n    const [name, setName] = React.useState('');\r\n    const [description, setDescription ] = React.useState('');\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const [nameErrorMessage, setNameErrorMessage] = React.useState({errorMessage:'', isValid:true});\r\n    const [jobErrorMessage, setJobErrorMessage] = React.useState({errorMessage:'', isValid:true});\r\n    const [isValid, setIsValid] = React.useState(true);\r\n\r\n    const nameRef = React.useRef();\r\n    const aboutRef = React.useRef();\r\n\r\n    React.useEffect(() => {\r\n        setName(currentUser.name);\r\n        setDescription(currentUser.about);\r\n      }, [currentUser]); \r\n\r\n    React.useEffect(() => {\r\n        function fromValidity(){\r\n            if((nameErrorMessage.isValid && jobErrorMessage.isValid) === true){\r\n                setIsValid(true)\r\n            } else {\r\n                setIsValid(false)\r\n            }\r\n        }\r\n\r\n        fromValidity()\r\n      }, [nameErrorMessage,jobErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n        function resetFields(){\r\n            nameRef.current.value=name;\r\n            aboutRef.current.value=description;\r\n            setNameErrorMessage({errorMessage:'', isValid:true});\r\n            setJobErrorMessage({errorMessage:'', isValid:true})\r\n          }\r\n        resetFields()\r\n      }, [props.isOpen])\r\n\r\n    function handleNameChange(e) {\r\n    //setName(e.target.value);\r\n    setNameErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n   // fromValidity()\r\n}\r\nfunction handleAboutChange(e) {\r\n    //setDescription(e.target.value);\r\n    setJobErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n}\r\n\r\nfunction handleSubmit(e){\r\n    // Запрещаем браузеру переходить по адресу формы\r\n    e.preventDefault();\r\n    // Передаём значения управляемых компонентов во внешний обработчик\r\n    props.onUpdateUser({\r\n        name: nameRef.current.value,\r\n        about: aboutRef.current.value,\r\n    });\r\n}\r\n\r\nreturn(\r\n<PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"editProfile\" title=\"Редактировать профиль\">\r\n            <div className=\"popup__field\">\r\n                <input ref={nameRef} className=\"popup__row\" name=\"name\" type=\"text\" minLength=\"2\" maxLength=\"40\" required id=\"name\" defaultValue={name} onChange={handleNameChange} placeholder=\"Ваше имя\"/>\r\n                <span className=\"popup__row-error_active name-error\">{nameErrorMessage.errorMessage}</span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n                <input ref={aboutRef} className=\"popup__row\" name=\"about\" type=\"text\" id=\"job\" minLength=\"2\" required maxLength=\"200\" defaultValue={description} onChange={handleAboutChange} placeholder=\"Чем занимаетесь?\"/>\r\n                <span className=\"popup__row-error_active job-error\">{jobErrorMessage.errorMessage}</span>\r\n            </div>\r\n</PopupWithForm>\r\n)}\r\n\r\nexport default EditProfilePopup;","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction EditAvatarPopup(props){\r\n  const [avatarErrorMessage, setAvatarErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\n  const [isValid, setIsValid] = React.useState(true);\r\n    //console.log(props.isOpen)\r\n  const avatar = React.useRef();\r\n\r\n    React.useEffect(() => {\r\n      function fromValidity(){\r\n        console.log(avatarErrorMessage.isValid,avatarErrorMessage.errorMessage)\r\n        if(avatarErrorMessage.isValid === true){\r\n            setIsValid(true)\r\n        } else {\r\n            setIsValid(false)\r\n        }\r\n    }\r\n\r\n      fromValidity()\r\n    }, [avatarErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n      function resetFields(){\r\n        avatar.current.value=\"\";\r\n        setAvatarErrorMessage({errorMessage:'', isValid:false});\r\n      }\r\n      \r\n      resetFields()\r\n    }, [props.isOpen])\r\n    \r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n      \r\n        props.onUpdateAvatar({\r\n          avatar: avatar.current.value,\r\n        });\r\n      }   \r\n\r\n      function handleAvatarChange(e) {\r\n        setAvatarErrorMessage({errorMessage:e.target.validationMessage, isValid:e.target.checkValidity()})\r\n    }\r\n\r\n    return(\r\n    <PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"editAvatar\" title=\"Обновить аватар\">\r\n            <div className=\"popup__field\">\r\n                <input onChange={handleAvatarChange} ref={avatar} className=\"popup__row\" type=\"url\" name=\"link_avatar\" id=\"avatar\" required defaultValue=\"\" placeholder=\"Сылка на изображение\"/>\r\n                <span className=\"popup__row-error_active avatar-error\">{avatarErrorMessage.errorMessage}</span>\r\n            </div>  \r\n    </PopupWithForm>\r\n    )\r\n}\r\nexport default EditAvatarPopup;","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction AddPlacePopup(props){\r\n    const place = React.useRef();\r\n    const link = React.useRef();\r\nfunction handleSubmit(e){\r\n    e.preventDefault();\r\n    props.onAddPlaceSubmit(\r\n        {place:place.current.value, \r\n        link:link.current.value}\r\n        )\r\n    }\r\n    \r\nconst [placeErrorMessage, setPlaceErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\nconst [linkErrorMessage, setLinkErrorMessage] = React.useState({errorMessage:'', isValid:false});\r\nconst [isValid, setIsValid] = React.useState(false);\r\n\r\n    React.useEffect(() => {\r\n        function fromValidity(){\r\n        if((placeErrorMessage.isValid && linkErrorMessage.isValid) === true){\r\n            setIsValid(true)\r\n        } else {\r\n            setIsValid(false)\r\n        }\r\n    }\r\n      fromValidity()\r\n\r\n    }, [placeErrorMessage, linkErrorMessage])\r\n\r\n    React.useEffect(() => {\r\n        function resetFields(){\r\n            place.current.value=\"\";\r\n            link.current.value=\"\";\r\n            setPlaceErrorMessage({errorMessage:'', isValid:false});\r\n            setLinkErrorMessage({errorMessage:'', isValid:false})\r\n          }\r\n\r\n        resetFields()\r\n      }, [props.isOpen])\r\n\r\n    function handleAddCard(){\r\n        setPlaceErrorMessage({errorMessage:place.current.validationMessage, isValid:place.current.checkValidity()})\r\n        setLinkErrorMessage({errorMessage:link.current.validationMessage, isValid:link.current.checkValidity()})\r\n    }\r\n\r\nreturn(\r\n    <PopupWithForm isValid={isValid} onSubmit={handleSubmit} onClose={props.onClose} isOpen={props.isOpen} name=\"addCard\" title=\"Новое место\">\r\n            <div className=\"popup__field\">\r\n                <input onChange={handleAddCard} ref={place} className=\"popup__row\" type=\"text\" minLength=\"2\" maxLength=\"30\" name=\"place\" id=\"place\"  placeholder=\"Название\" required/>\r\n                <span className=\"popup__row-error_active place-error\">{placeErrorMessage.errorMessage}</span>\r\n            </div>\r\n            <div className=\"popup__field\">\r\n                <input onChange={handleAddCard} ref={link} className=\"popup__row\" type=\"url\" name=\"link\" id=\"link\"  placeholder=\"Ссылка на картинку\" required/>\r\n                <span className=\"popup__row-error_active link-error\">{linkErrorMessage.errorMessage}</span>\r\n            </div>\r\n    </PopupWithForm>\r\n)\r\n}\r\nexport default AddPlacePopup","import PopupWithForm from './PopupWithForm.js';\r\nimport React from \"react\";\r\nfunction ConformPopup(props){\r\n    return(\r\n        <PopupWithForm onSubmit={props.onSubmit} isValid={true} onClose={props.onClose} isOpen={props.isOpen} name=\"deleteCard\" title=\"Вы уверены?\"/>\r\n    )\r\n}\r\nexport default ConformPopup;","\r\n//import './App.css';\r\nimport '../index.css';\r\nimport Header from './Header.js';\r\nimport Footer from './Footer.js';\r\nimport Main from './Main.js';\r\nimport api from \"../utils/api\";\r\nimport ImagePopup from './ImagePopup.js';\r\nimport EditProfilePopup from './EditProfilePopup.js';\r\nimport EditAvatarPopup from './EditAvatarPopup.js';\r\nimport AddPlacePopup from './AddPlacePopup.js';\r\nimport ConfirmPopup from './ConfirmPopup.js';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport React, { useEffect } from \"react\";\r\n\r\nfunction App() {\r\n    const [currentUser, setCurrentUser] = React.useState([]);\r\n    const [isEditProfilePopupOpen,setEditProfilePopupOpen] = React.useState(false);\r\n    const [isAddPlacePopupOpen,setAddPlacePopupOpen] = React.useState(false);\r\n    const [isEditAvatarPopupOpen,setEditAvatarPopupOpen] = React.useState(false);\r\n    const [isConfirmPopupOpen,setConfirmPopupOpen] = React.useState(false);\r\n    const [selectedCard, setSelectedCard] = React.useState(false);\r\n    const [cardToDelete, setCardToDelete] = React.useState(false);\r\n    const [cards, setCards] = React.useState([])\r\n\r\n    useEffect(()=>{\r\n        api.getData()\r\n            .then((cardsData)=> {\r\n                const card = cardsData.map(card => {\r\n                    return{\r\n                        _id: card._id,\r\n                        name: card.name,\r\n                        likes: card.likes,\r\n                        link: card.link,\r\n                        owner: {_id: card.owner._id}\r\n                    } \r\n                });\r\n                setCards(card);\r\n            })\r\n    },[]);\r\n\r\n    \r\n    function handleCardLike(card) {\r\n        // Снова проверяем, есть ли уже лайк на этой карточке\r\n        const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n        // Отправляем запрос в API и получаем обновлённые данные карточки\r\n        api.changeLikeCardStatus(card._id, !isLiked)\r\n        .then((newCard) => {\r\n            const newCards = cards.map((c) => c._id === card._id ? newCard : c)\r\n            setCards(newCards)\r\n            });\r\n    } \r\n\r\n    function handleCardDelete(card){\r\n        setCardToDelete(card);\r\n        setConfirmPopupOpen(!isConfirmPopupOpen)\r\n    }\r\n\r\n    function confirmDeleteCard(e){\r\n        e.preventDefault();\r\n        console.log(cardToDelete)\r\n         api.deleteCard(cardToDelete._id)\r\n        .then((resp) => {\r\n            //console.log(resp)\r\n            });\r\n        api.getData()\r\n        .then((cardsRefreshed)=> {\r\n            const newCards = cardsRefreshed.filter(cardR => cardR._id !== cardToDelete._id);\r\n            setCards(newCards);\r\n            closeAllPopups();\r\n        })\r\n    }\r\n\r\n    useEffect(()=>{\r\n        api.getUserInfo()\r\n        .then((userInfo)=> {\r\n            const cardsData = ()=>{\r\n                return{\r\n                    _id: userInfo._id,\r\n                    name: userInfo.name,\r\n                    avatar: userInfo.avatar,\r\n                    about: userInfo.about\r\n                }    \r\n            };\r\n           setCurrentUser(cardsData());\r\n        })\r\n   },[])\r\n\r\n   //console.log(currentUser);\r\n\r\n    function handleCardClick (selectedCard){\r\n        setSelectedCard(selectedCard)\r\n    }\r\n\r\n    function closeAllPopups(){\r\n        setEditAvatarPopupOpen(false);\r\n        setEditProfilePopupOpen(false);\r\n        setAddPlacePopupOpen(false);\r\n        setSelectedCard(false);\r\n        setConfirmPopupOpen(false);\r\n    }\r\n\r\n    function handleEditAvatarClick(){\r\n        setEditAvatarPopupOpen(!isEditAvatarPopupOpen)\r\n    }\r\n\r\n    function handleEditProfileClick(){\r\n        setEditProfilePopupOpen(!isEditProfilePopupOpen)\r\n    }\r\n\r\n    function handleAddPlaceClick(){\r\n        setAddPlacePopupOpen(!isAddPlacePopupOpen)\r\n    }\r\n\r\n    function handleUpdateUser(data){\r\n        api.setUserInfo(data).then((resp)=> {\r\n            setCurrentUser(resp)})\r\n            closeAllPopups()\r\n    }\r\n\r\n    function handleUpdateAvatar(data){\r\n        api.addAvatar(data.avatar).then((resp)=> {\r\n            console.log(resp);\r\n            setCurrentUser(resp)\r\n            closeAllPopups();\r\n        })\r\n    }\r\n\r\n    function handleAddPlaceSubmit(data){\r\n        api.addNewCard(data)\r\n        .then((resp)=>{\r\n            console.log(resp);\r\n            setCards([resp, ...cards]);\r\n            closeAllPopups();\r\n        })\r\n    }\r\n\r\n    function overlayClose(e){\r\n        if((isEditAvatarPopupOpen || isEditProfilePopupOpen || isAddPlacePopupOpen || isConfirmPopupOpen) === true){\r\n            if(String(e.target.classList) === 'popup popup_display_flex'){\r\n            closeAllPopups();\r\n        }\r\n        }\r\n        \r\n    }\r\n\r\n    function escapeClose(e){\r\n        console.log(e.key)\r\n        if((isEditAvatarPopupOpen || isEditProfilePopupOpen || isAddPlacePopupOpen || isConfirmPopupOpen) === true){\r\n            if(e.key === 'Escape'){\r\n            closeAllPopups();\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n  return (\r\n<CurrentUserContext.Provider value={currentUser}>\r\n<header>\r\n    <meta charSet=\"UTF-8\"/>\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"/>\r\n    <link rel=\"stylesheet\" href=\"./index.css\"/>\r\n    <title>Mesto</title>\r\n</header>\r\n<div className=\"main\" onKeyDown={escapeClose} onClick={overlayClose}>\r\n    <ImagePopup onClose={closeAllPopups} card={selectedCard}/>\r\n    <EditAvatarPopup onUpdateAvatar ={handleUpdateAvatar} isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} />\r\n    <EditProfilePopup onUpdateUser ={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} /> \r\n    <AddPlacePopup onAddPlaceSubmit ={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} /> \r\n    <ConfirmPopup onSubmit={confirmDeleteCard} onClose={closeAllPopups} isOpen={isConfirmPopupOpen}/>\r\n    <Header />\r\n    <Main cards={cards} onCardLike={handleCardLike} onCardDelete={handleCardDelete} onCardClick={handleCardClick} onEditProfile={handleEditProfileClick} onAddPlace={handleAddPlaceClick} onEditAvatar={handleEditAvatarClick}/>\r\n    <Footer />\r\n</div>\r\n</CurrentUserContext.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}